### 推送方式：

**MQTT**
订阅topic：
**anxinyun_alarms**

数据为Json格式，具体告警数据格式说明：


```scala
/**
  * 告警消息
  *
  * @param messageMode   AlarmGeneration、AlarmAutoElimination、AlarmManElimination
  * @param structureId   结构物ID
  * @param structureName 结构物名称
  * @param sourceId      告警源ID
  * @param sourceName    告警源名称
  * @param alarmTypeCode 告警类型
  * @param alarmCode     告警错误码
  * @param content       告警内容
  * @param time          告警时间
  * @param sourceTypeId  告警源类型:0-DTU 1-传感器 2-测点
  * @param sponsor       消息发起者
  * @param extras        其他信息
  */
@JsonIgnoreProperties(ignoreUnknown = true)
case class AlarmMsg(messageMode: String,
                    structureId: Int,
                    structureName: String,
                    sourceId: String,
                    sourceName: String,
                    alarmTypeCode: String,
                    alarmCode: String,
                    content: String,
                    time: DateTime,
                    sourceTypeId: Int = 1, // 0:DTU, 1:传感器, 2:测点
                    sponsor: String = "et.recv", // 消息的发起者
                    extras: Option[Map[String, Any]] = None
                   ) {

}
```

### 附告警错误码：



| 错误码   | 说明                              |
| -------- | --------------------------------- |
| 1001     | 采集超时                          |
| 10010001 | 发送数据为空                      |
| 10010002 | 无效DTU                           |
| 10010003 | 沉降分组计算没有基点数据          |
| 10010004 | 编译错误                          |
| 10010005 | 采集命令构造错误                  |
| 10010006 | 该传感器不参与采集                |
| 10010007 | 找不到该传感器信息                |
| 10037    | 温度过高告警                      |
| 2001     | 任务已过期                        |
| 20010001 | DTU未连接                         |
| 2002     | 维度未使用能力                    |
| 20020001 | 写串口异常                        |
| 20020002 | DTU忙碌                           |
| 20020003 | 采集命令下发错误                  |
| 2003     | 维度任务交叠                      |
| 2004     | 维度在开始前被终止                |
| 2005     | 维度达到最大调用次数              |
| 3001     | 协议定义错误                      |
| 30010001 | 单总线忙                          |
| 30010002 | 单总线短路检测                    |
| 30010003 | 校验码错误                        |
| 30010004 | 功能码错误                        |
| 30010005 | 项目号错误                        |
| 30010006 | 广播号错误                        |
| 30010007 | 读取传感器信息错误                |
| 30010008 | 读取设备信息错误                  |
| 30010009 | 采集时间错误                      |
| 30010010 | 通道号错误                        |
| 30010011 | 采集的频率异常                    |
| 30010012 | 采集的温度异常                    |
| 30010013 | 采集的湿度异常                    |
| 30010014 | 采集的电压异常                    |
| 30010015 | 采集的角度异常                    |
| 30010016 | 设备自动采集                      |
| 30010017 | 系统忙碌                          |
| 30010018 | 数据存储错误                      |
| 30010019 | 数据读取错误                      |
| 30010020 | 时间设置错误                      |
| 30010021 | 数据存储错误                      |
| 30010022 | 振弦传感器断路                    |
| 30010023 | 振弦传感器短路                    |
| 30010024 | 温度传感器断路                    |
| 30010025 | 温度传感器短路                    |
| 30010026 | 测斜仪类传感器初始角度设置错误    |
| 30010027 | 测斜仪类传感器温补系数设置错误    |
| 30010028 | 磁通量传感器采集积分电压异常      |
| 30010029 | 器件初始化/复位失败               |
| 30010030 | I2C总线忙                         |
| 30010031 | 设备电量异常                      |
| 30010101 | 模块号错误                        |
| 30010201 | 频率线异常                        |
| 30010202 | 温度线异常                        |
| 30010203 | 频率线温度线都异常                |
| 30010301 | 华云雨量计同步时间                |
| 30010401 | 功能号错误                        |
| 30010402 | 寄存器错误                        |
| 30010403 | 正常操作发生异常                  |
| 30010501 | 激光返回错误                      |
| 30010601 | 设备断线                          |
| 3002     | 无法建立连接                      |
| 30020001 | 协议错误                          |
| 30020002 | 不受支持的协议                    |
| 3003     | 协议初始化异常                    |
| 30030001 | 采集超时                          |
| 30040001 | 解析数据失败                      |
| 30040002 | 接收数据为空                      |
| 30040003 | 无效数据                          |
| 3005     | 协议数据格式异常                  |
| 30050001 | 采集数据超出传感器量程            |
| 3006     | 协议加载异常                      |
| 30060001 | 传感器数据中断                    |
| 3007     | 协议脚本中缺少函数                |
| 30070001 | 传感器测量值超过1级告警阈值       |
| 30070002 | 传感器测量值超过2级告警阈值       |
| 30070003 | 传感器测量值超过3级告警阈值       |
| 3008     | 脚本调用异常                      |
| 30080001 | 传感器数据变化速率超过1级告警阈值 |
| 30080002 | 传感器数据变化速率超过2级告警阈值 |
| 30080003 | 传感器数据变化速率超过3级告警阈值 |
| 30090001 | 聚集数据超过1级告警阈值           |
| 30090002 | 聚集数据超过2级告警阈值           |
| 30090003 | 聚集数据超过3级告警阈值           |
| 3010     | 协议缺失                          |
| 30100001 | 数据异常                          |
| 30110001 | 限产                              |
| 30120001 | 停产                              |
| 30130001 | 未正常运行                        |
| 30140601 | 未戴安全帽                        |
| 30150601 | 人员聚集                          |
| 30160601 | 吸烟告警                          |
| 30170601 | 未穿反光衣                        |
| 30310001 | 渣土车超速告警                    |
| 30320001 | 渣土车防驶入告警code              |
| 30330001 | 渣土车防驶出告警                  |
| 30340001 | 渣土车抓拍告警                    |
| 30410001 | 工牌围栏告警                      |
| 30510001 | 工地人员进入告警                  |
| 30520001 | 工地人员外出告警                  |
| 30530001 | 火灾自动报警                      |
| 30540001 | 火灾设备下线报警                  |
| 30540002 | 火灾设备上线报警                  |
| 5001     | 数据有效性判断: 违例              |
| 50010001 | 网关与服务端之间心跳超时          |
| 60010001 | 电量不高于10%                     |
| 60010002 | 电量不高于20%                     |
| 60010003 | 电量不高于30%                     |
| 70021100 | 24小时紧急                        |
| 70021101 | 个人救护                          |
| 70021110 | 火警报警                          |
| 70021111 | 燃气报警                          |
| 70021112 | 水浸报警                          |
| 70021130 | 瞬时报警                          |
| 70021140 | 温感报警                          |
| 70021384 | 无线探测器低压                    |
| 70021400 | 周期检测                          |
| 70021485 | 巡更                              |
| 70021609 | IP设置                            |
| 70021702 | 无线探测器防拆                    |
| 70030001 | 垃圾箱状态异常                    |
| 70040001 | 电流小于阈值                      |
| 70040002 | 电流大于阈值                      |
| 70040003 | 电压小于阈值                      |
| 70040004 | 电压大于阈值                      |
| 70040005 | 离线                              |
| 70050001 | RTU告警                           |
| 70110001 | 一级预警                          |
| 70110002 | 二级预警                          |
| 70110003 | 三级预警                          |
| 70120001 | 测点预警                          |
| 76660001 | sos求救                           |

