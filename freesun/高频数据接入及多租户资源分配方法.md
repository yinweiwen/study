高频数据接入及多租户资源分配方法



总体思路： 在云上部署“轻量化本地化监测系统”，按资源收费，数据采集、存储部分单独部署，性能消耗小的部分使用云上公共服务。



用户使用场景：

用户可以创建资源包（类似`ECS`弹性云主机），选择不同规格的资源包。需要计入的资源：接入带宽、CPU、内存、存储量。

用户选择资源包后可以进行初始化，安装部署本独立系统。

用户在创建结构物的时候，用户可以选择“高性能资源包”，即进行结构物和资源包的绑定。

> 目前平台系统等价于“默认资源包”，不额外收费但接入但限制接入频率`1Hz`。



如何在k8s中进行多租户资源分配?



服务的改造内容：

#### (一)、DAC

被纳入“资源包”中的结构物，从以太**编排器**中脱管，同时，对应资源包中DAC能够正确识别该Thing并纳入管理，DAC向Proxy发送注册。

这样，流量就会转发到对应资源包的`DAC`中。同时，因为该DAC没有被编排其纳管，所以`ZOOKEEPER`中没有该资源，DAC中需要修改获取资源分配的方法，以正确处理前端更新deploy时的通知消息。



#### (二)、GO-ET

